<!--<div data-include-path="../layout/header.html" id="headers"></div>-->

<main class="main member">
    <div class="join">
        <!-- <h1>회원정보 수정</h1> -->
		<form name="form1" method="post" target="sysfrm">
        <input type="hidden" id="join_motive" name="join_motive" value="{{join_motive}}" />
        <div class="join_wrap">
            <div class="join_box">
                <label for="user_name">이름</label>
                <input type="text" id="user_name" name="user_name" value="{{name}}" disabled>
            </div>

            <div class="join_box">
                <label for="user_birthday">생년월일</label>
                <input type="text" id="user_birthday" name="user_birthday" value="{{birthday_conv}}<!--@if(lunar_conv)-->&nbsp;(음력)<!--/if(lunar_conv)-->" disabled>
            </div>

			<!--@nif(sns_member_block)-->
            <div class="join_box">
                <label for="user_id">아이디</label>
                <input type="text" id="user_id" name="user_id" value="{{id}}" disabled>
            </div>
			<!--/nif(sns_member_block)-->

            <div class="join_box">
                <label for="mobile">휴대폰 번호</label><!----{{nice_iInfo.sbirthdate}}--{{nice_iInfo.srequestnumber}}--{{nice_iInfo.sresponsenumber}}-->
                <input type="text" id="mobile" name="mobile" value="{{mobile}}" disabled>
            </div>            

			<!--@nif(sns_member_block)-->
            <div class="join_box">
                <label for="passwd">비밀번호 (영문, 숫자 조합 8자리 이상)</label>
                <input type="password" id="passwd" name="passwd" onkeyup="javascript:checkPassword1();">
                <button type="button" class="btn btn_toggle"><img src="../assets/img/ico_toggle_pw_hide.png" alt=""></button>
            </div>
            <p id="errorPassword1" class="error"></p>
    
            <div class="join_box">
                <label for="passwd2">비밀번호 확인</label>
                <input type="password" id="passwd2" name="passwd2" onkeyup="javascript:checkPassword2();">
                <button type="button" class="btn btn_toggle"><img src="../assets/img/ico_toggle_pw_hide.png" alt=""></button>
            </div>
            <p id="errorPassword2" class="error"></p>
			<!--/nif(sns_member_block)-->

            <div class="join_box">
                <label for="email">이메일</label>
                <input type="text" id="email" name="email" onkeyup="javascript:checkEmail();">
            </div>
            <p id="errorEmail" class="error"></p>

			<!--@if(sns_member_block)-->
            <div class="join_box">
                <label for="l8">가입경로</label>
                <p>{{sns_path_block}} 로그인 <strong>※ {{reg_date_conv}} 연동 동의</strong></p>
            </div>
			<!--/if(sns_member_block)-->

            <div class="join_box __cert">
                <label for="post_zipcode">주소</label>
                <input type="text" id="post_zipcode" name="post_zipcode" readonly>
                <button type="button" onclick="post_code();" class="btn btn_cert">주소 검색</button>
                <input type="text" id="post_addr" name="post_addr" class="w_full" readonly>
                <input type="text" id="post_addr2" name="post_addr2" class="w_full">
				<input type="hidden" name="hidden_new_post_addr" value="{{new_post_addr}}" />
            </div>
            <div class="agree_box">
                <div>
                    <input type="checkbox" class="checkbox" id="ad_yn" name="ad_yn" value="Y">
                    <label for="ad_yn">학습 정보 및 이벤트 SMS 수신 동의</label>
                </div>
            </div>
            <!--// agree_box -->
            
            <button type="submit" class="btn btn_join">회원정보 수정</button>
        </div>
        <!--// join_wrap -->
		</form>
		{{form_script}}

    </div>
</main>

<script src="https://spi.maps.daum.net/imap/map_js_init/postcode.v2.js"></script>
<script>
	function checkPassword1() {
		var f = document.forms['form1'];
		var password1 = f['passwd'].value; 
		var chk_num = password1.search(/[0-9]/g); 
		var chk_eng = password1.search(/[a-z]/ig);

		f['passwd2'].value = ""; 
		if(password1 == '' || password1.length < 8) {
			$("#errorPassword1").text("영문, 숫자 조합 8자리 이상으로 설정해 주세요.");
			return false;
		} else {
			if(chk_num < 0 || chk_eng < 0) { 
				$("#errorPassword1").text("영문 및 숫자를 혼용하여 설정해 주세요.");
			} else {
				$("#errorPassword1").text("");
			}			
		}
	}
	function checkPassword2() {
		var f = document.forms['form1'];
		var password1 = f['passwd'].value;
		var password2 = f['passwd2'].value;
		if(password1 == password2) {
			$("#errorPassword2").text("");
		} else {
			if(password2 != '') {
				$("#errorPassword2").text("입력하신 비밀번호가 일치하지 않습니다.");
				return false;		
			} else {
				$("#errorPassword2").text("");
			}
		}
		return false;
	}
	function checkEmail() {
		var f = document.forms['form1'];
		var email = f['email'].value;
		if(email == '' || email == 'undefined') return false;
		if(!email_check(email)) {
			$("#errorEmail").text("이메일 형식이 아닙니다.");
			return false;
		} else {
			$("#errorEmail").text("");
		}
		return false;
	}
	function post_code() {
		var f = document.forms['form1'];
		var v = GetFormValue("form1", "new_addr_yn");
		new daum.Postcode({
			oncomplete: function(data) {
				// 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

				// 도로명 주소의 노출 규칙에 따라 주소를 조합한다.
				// 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
				var fullRoadAddr = data.roadAddress; // 도로명 주소 변수
				var extraRoadAddr = ''; // 도로명 조합형 주소 변수

				// 법정동명이 있을 경우 추가한다.
				if(data.bname !== ''){
					extraRoadAddr += data.bname;
				}
				// 건물명이 있을 경우 추가한다.
				if(data.buildingName !== ''){
					extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
				}
				// 도로명, 지번 조합형 주소가 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
				if(extraRoadAddr !== ''){
					extraRoadAddr = ' (' + extraRoadAddr + ')';
				}
				// 도로명, 지번 주소의 유무에 따라 해당 조합형 주소를 추가한다.
				if(fullRoadAddr !== ''){
					fullRoadAddr += extraRoadAddr;
				}
				f['post_zipcode'].value = data.zonecode;
				f['post_addr'].value = fullRoadAddr;
				f['hidden_new_post_addr'].value = fullRoadAddr;
			}
		}).open();
	}
</script> 
<!--<div data-include-path="../layout/footer.html" id="footers"></div>-->